<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API de Vérification des Numéros</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
    <div class="container mx-auto p-6">
        <h1 class="text-4xl font-bold text-center text-blue-600 mb-6">Bienvenue sur l'API de vérification des numéros de téléphone !</h1>
        <p class="text-lg text-gray-700 mb-4">Cette API vous permet de récupérer des informations détaillées sur un numéro de téléphone, telles que :</p>
        <ul class="list-disc list-inside mb-6 text-gray-700">
            <li>Le pays d'origine</li>
            <li>L'opérateur de télécommunication</li>
            <!--li>Les coordonnées géographiques (latitude et longitude)</li-->
            <li>La validité du numéro</li>
            <li>Le type de numéro de téléphone (mobile, fixe, etc.)</li>
        </ul>

        <p class="text-lg font-semibold text-gray-700 mb-2"><strong>Comment utiliser l'API :</strong></p>
        <ul class="list-disc list-inside mb-6 text-gray-700">
            <li><strong>URL de base :</strong> <code class="bg-gray-200 p-1 rounded">/phone-info</code></li>
            <li>
                <strong>Méthode GET :</strong> Envoyez une requête vers <code class="bg-gray-200 p-1 rounded">/phone-info</code> avec le paramètre <code>?phone_number=</code>
                <br>Exemple : <code class="bg-gray-200 p-1 rounded">/phone-info?phone_number=+918897909596</code>
            </li>
            <li>
                <strong>Méthode POST :</strong> Envoyez un corps JSON vers <code class="bg-gray-200 p-1 rounded">/phone-info</code>
                <br>Exemple :
                <pre class="bg-gray-200 p-2 rounded mt-2">
{
    "phone_number": "+918897909596"
}
                </pre>
            </li>
        </ul>

        <p class="text-lg font-semibold text-gray-700 mb-2"><strong>Exemple de réponse JSON :</strong></p>
        <pre class="bg-gray-200 p-2 rounded mb-6">
{
    "phone_number": "+918897909596",
    "country_code": 91,
    "national_number": "8897909596",
    "location": "India",
    "service_provider": "Airtel",
    "is_valid_number": true,
    "number_type": "MOBILE"
}
        </pre>

        <!-- Section Vidéo -->
        <div class="mb-6">
            <h2 class="text-2xl font-bold text-blue-600 mb-2">Démonstration Vidéo</h2>
            <p class="text-gray-700 mb-2">Regardez une démonstration de l'API en action :</p>
            <video controls class="w-full max-w-2xl rounded-lg shadow-md">
                <source src="https://example.com/demo-video.mp4" type="video/mp4">
                Votre navigateur ne supporte pas la vidéo.
            </video>
            <p class="text-sm text-gray-500 mt-2">* Remplacez l'URL de la vidéo par votre fichier hébergé (ex. sur Vimeo ou YouTube).</p>
        </div>

        <!-- Formulaire de test -->
        <div class="mb-6">
            <h2 class="text-2xl font-bold text-blue-600 mb-2">Testez l'API ici !</h2>
            <form id="apiTestForm" class="space-y-4" method="POST">
                <div>
                    <label for="phoneNumber" class="block text-gray-700">Numéro de téléphone (code pays + numéro, sans espaces) :</label>
                    <input type="text" id="phoneNumber" name="phoneNumber" class="w-full p-2 border rounded" placeholder="22870839169" required>
                </div>
                <button type="submit" class="bg-blue-600 text-white p-2 rounded hover:bg-blue-700">Tester</button>
            </form>
            <div id="apiResponse" class="mt-4 p-2 bg-gray-100 border rounded"></div>
        </div>

        <p class="text-gray-700">L'heure actuelle est {{ current_time }} GMT.</p>
        <p class="text-gray-700">
            Pour plus d'informations ou pour rendre le service payant,
            <a href="mailto:fabricetoyi87@gmail.com" target="_blank" class="text-blue-600 hover:underline">contactez-nous</a> !
        </p>
    </div>

    <script>
        document.getElementById('apiTestForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const phoneNumberInput = document.getElementById('phoneNumber').value;
            const responseDiv = document.getElementById('apiResponse');

            // Nettoyer et normaliser le numéro
            let phoneNumber = phoneNumberInput.trim().replace(/\s+/g, ''); // Supprime tous les espaces
            if (!phoneNumber.startsWith('+')) {
                phoneNumber = '+' + phoneNumber; // Ajoute + si absent
            }

            try {
                const response = await fetch('/phone-info/?phone_number=' + encodeURIComponent(phoneNumber), {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                });
                const data = await response.json();
                responseDiv.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                responseDiv.innerHTML = `<p class="text-red-600">Erreur : ${error.message}</p>`;
            }
        });
    </script>
</body>
</html>